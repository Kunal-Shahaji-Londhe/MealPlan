{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kunal Londhe/OneDrive/\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8/Development/Web Development/Frontend/meal-planner/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Kunal Londhe/OneDrive/\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8/Development/Web Development/Frontend/meal-planner/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Kunal Londhe/OneDrive/\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8/Development/Web Development/Frontend/meal-planner/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';// Replace useHistory with useNavigate\nimport{useUser}from'./userContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useUser=useUser(),SetUsername=_useUser.SetUsername;// Use the useNavigate hook to access navigation\nvar navigate=useNavigate();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(username===\"\"||password===\"\")){_context.next=3;break;}alert(\"Please enter all the details!\");return _context.abrupt(\"return\");case 3:_context.prev=3;_context.next=6;return axios.post('http://localhost:3000/login',{username:username,password:password});case 6:response=_context.sent;token=response.data.token;if(token){// Store the token securely (e.g., in a cookie or local storage) for future API requests.\nlocalStorage.setItem('token',token);SetUsername(username);// Redirect the user to the authenticated part of your app (e.g., the meal planner)\nnavigate('/meal-app');// Use navigate instead of history.push\n}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);// Handle login error\nsetError('Login failed. Please check your credentials and try again.');case 14:case\"end\":return _context.stop();}},_callee,null,[[3,11]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"signin-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"nav-text\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBB: Username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\uD83D\\uDD11: Password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"crud-btn\",onClick:handleLogin,children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error})]});};export default Login;","map":{"version":3,"names":["React","useState","axios","useNavigate","useUser","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","_useUser","SetUsername","navigate","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","token","wrap","_callee$","_context","prev","next","alert","abrupt","post","sent","data","localStorage","setItem","t0","stop","apply","arguments","className","children","type","placeholder","onChange","e","target","value","onClick","style","color"],"sources":["C:/Users/Kunal Londhe/OneDrive/ドキュメント/Development/Web Development/Frontend/meal-planner/Frontend/src/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom'; // Replace useHistory with useNavigate\r\nimport { useUser } from './userContext';\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const { SetUsername } = useUser();\r\n\r\n  // Use the useNavigate hook to access navigation\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async () => {\r\n    if(username === \"\" || password === \"\"){\r\n      alert(\"Please enter all the details!\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.post('http://localhost:3000/login', { username, password });\r\n      const token = response.data.token;\r\n\r\n      if(token){\r\n        // Store the token securely (e.g., in a cookie or local storage) for future API requests.\r\n      localStorage.setItem('token', token);\r\n      SetUsername(username);\r\n      // Redirect the user to the authenticated part of your app (e.g., the meal planner)\r\n      navigate('/meal-app'); // Use navigate instead of history.push\r\n      }\r\n\r\n      \r\n    } catch (error) {\r\n      // Handle login error\r\n      setError('Login failed. Please check your credentials and try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='signin-card'>\r\n      <h2 className='nav-text'>Login</h2>\r\n      <section  className='input'>\r\n      <input type=\"text\" placeholder=\"👨‍💻: Username\" onChange={(e) => setUsername(e.target.value)} />\r\n      <input type=\"password\" placeholder=\"🔑: Password\" onChange={(e) => setPassword(e.target.value)} />\r\n      </section>\r\n      <button className='crud-btn' onClick={handleLogin}>Login</button>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}